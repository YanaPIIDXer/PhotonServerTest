# パケット通信

## Event / Operation

Photonの通信には大きくこの２種類が存在する。  
- Event
  - サーバから一方的に通知される通信
  - クライアント側から投げる事は出来ない
- Operation
  - クライアントがサーバに通信を投げて、サーバはその結果を返す
    - 要はRequest / Response
    - ただ、例えばプレイヤーの移動をサーバに投げた所でサーバは「何を返せというのか」という話になるので、必ずしもRequestに対してResponseがあるとは限らない。

Eventはサーバ主体の通信で、Operationはクライアント主体の通信。  

## 通信周りの設計方針

### クライアント

#### Event
- 受け取りたいオブジェクトが受け取る
  - １つのイベントに対して複数のクラスがぶら下がる事も・・・？
    - イベントコードをキーにしたDictionaryでSubjectを管理する

#### Operation
上述の通り、これは「クライアント主体の通信」なので、以下の通り２つの概念に分けるものとする。  

- Request
  - サーバに何かを依頼する通信
  - 必ず何かしらのResponseが返ってくる
  - ResponseはRequestが投げられた場所に返ってくる（？）
    - Request送信時にResponseのハンドラも渡すので、やろうと思えばフィールドとして保持しているオブジェクトがResponseを受け取るという作り方も可能
- Report
  - 単なるサーバへの「報告」
    - 例えば「操作キャラの移動」等が該当する
    - 依頼をする訳ではないので投げっぱなし
 
 ### サーバ

オペレーションコードに対応したActionを保持する形で対応。  
